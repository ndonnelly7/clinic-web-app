package indexed.db;

import java.io.IOException;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@SuppressWarnings("serial")
public class InfoRetrievalServlet extends HttpServlet {
	public void doGet(HttpServletRequest req, HttpServletResponse resp)
			throws IOException, ServletException {
		String key_str = req.getParameter("key");
		
		long key = 0;
		if(key_str!= null && key_str != ""){
			key = Long.parseLong(key_str);
		}
		
		Customer c = new Customer(name,address,number,email,item,sales_person,location, ddob);
		CustomerStore.addCustomer(c);
		System.out.println(c);
		
		//The random number generated by client is returned to the client to confirm that this is the customer they're talking about
		//The server also provides a randomly generated long which should be completely unique
		//This long can then be set as the key of the correct customer
		req.setAttribute("id", random_id);
		req.setAttribute("key", c.getKey());
		RequestDispatcher view = req.getRequestDispatcher("/success.jsp");
		view.forward(req, resp);
	}
	
}
